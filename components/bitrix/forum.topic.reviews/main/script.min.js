!function(window){BX.namespace("BX.Forum");var FTRList=function(params){if(this.id="FTRList"+params.form.id,this.mess={},this.form=params.form,this.validated=!0,params.id)for(var ii=0;ii<params.id.length;ii++)this.bind(params.id[ii]);this.params={preorder:"Y"==params.preorder,pageNumber:params.pageNumber,pageCount:params.pageCount},BX.addCustomEvent(this.form,"onAdd",BX.delegate(this.add,this)),BX.addCustomEvent(this.form,"onRequest",BX.delegate((function(){if(void 0!==this.params.pageNumber){var pageNumberInput=this.form.elements.pageNumber;pageNumberInput||(pageNumberInput=BX.create("input",{props:{type:"hidden",name:"pageNumber"}}),this.form.appendChild(pageNumberInput)),pageNumberInput.value=this.params.pageNumber}if(void 0!==this.params.pageCount){var pageCountInput=BX.findChild(this.form,{attr:{name:"pageCount"}});pageCountInput||(pageCountInput=BX.create("input",{props:{type:"hidden",name:"pageCount"}}),this.form.appendChild(pageCountInput)),pageCountInput.value=this.params.pageCount}}),this)),BX.addCustomEvent(this.form,"onResponse",BX.delegate((function(){var input_pageno=BX.findChild(this.form,{attr:{name:"pageNumber"}},!0);input_pageno&&BX.remove(input_pageno)}),this))};FTRList.prototype={add:function(id,result){var container=BX(this.form.id+"container"),listform,post={className:/reviews-reply-form|reviews-collapse/},msgNode=window.fTextToNode(result.message);if(container||(container=BX.create("div",{attrs:{id:this.form.id+"container"},props:{className:"reviews-block-container reviews-reviews-block-container"},children:[BX.create("div",{props:{className:"reviews-block-outer"},children:[BX.create("div",{props:{className:"reviews-block-inner"}})]})]}),window.fReplaceOrInsertNode(container,null,BX.findChild(document,post,!0).parentNode,post),container=BX(this.form.id+"container")),listform=container?BX.findChild(container,{className:"reviews-block-inner"},!0):null,msgNode&&listform){if(result.allMessages){if(window.fReplaceOrInsertNode(msgNode,listform,BX.findChild(document,post,!0).parentNode,post),result.navigation&&result.pageNumber){var navDIV=window.fTextToNode(result.navigation),i,navPlaceholders=navDIV?BX.findChildren(container.parentNode,{className:"reviews-navigation-box"},!0):null;if(navDIV){if(!navPlaceholders){container.parentNode.insertBefore(BX.create("div",{props:{className:"reviews-navigation-box reviews-navigation-top"}}),container);var tmpDiv=container;do{tmpDiv=tmpDiv.nextSibling}while(tmpDiv&&1!=tmpDiv.nodeType);var bottomPager=BX.create("div",{props:{className:"reviews-navigation-box reviews-navigation-bottom"}});tmpDiv?container.parentNode.insertBefore(bottomPager,tmpDiv):container.parentNode.appendChild(bottomPager),navPlaceholders=BX.findChildren(container.parentNode,{className:"reviews-navigation-box"},!0)}for(i=0;i<navPlaceholders.length;i++)navPlaceholders[i].innerHTML=navDIV.innerHTML}this.params.pageNumber=result.pageNumber,this.params.pageCount=result.pageCount}if(result.messagesID&&"object"==typeof result.messagesID)for(var ii=0;ii<result.messagesID.length;ii++)result.messagesID[ii]!=id&&this.bind(result.messagesID[ii])}else void 0!==result.message&&(this.params.preorder?listform.appendChild(msgNode):listform.insertBefore(msgNode,listform.firstChild));window.fRunScripts(result.message),this.bind(id)}},bind:function(id){var node=BX("message"+id);if(node){this.mess["m"+id]={node:node,author:{id:node.getAttribute("bx-author-id"),name:node.getAttribute("bx-author-name")}};var buttons=BX.findChildren(node,{tagName:"A",className:"reviews-button-small"},!0),func=BX.delegate((function(){var res=BX.proxy_context;this.act(res.getAttribute("bx-act"),id)}),this),func2=BX.delegate((function(){this.act("reply",id)}),this),func3=BX.delegate((function(){this.act("quote",id)}),this);if(buttons&&buttons.length>0)for(var ii=0;ii<buttons.length;ii++)"moderate"==buttons[ii].getAttribute("bx-act")||"del"==buttons[ii].getAttribute("bx-act")?BX.adjust(buttons[ii],{events:{click:func},attrs:{"bx-href":buttons[ii].getAttribute("href"),href:"javascript:void(0);"}}):this.form&&("reply"==buttons[ii].getAttribute("bx-act")?BX.bind(buttons[ii],"click",func2):"quote"==buttons[ii].getAttribute("bx-act")&&BX.bind(buttons[ii],"mousedown",func3))}},act:function(act,id){if(id&&this.mess["m"+id])if("quote"==act){var selection=window.GetSelection();if(document.getSelection&&(selection=(selection=selection.replace(/\r\n\r\n/gi,"_newstringhere_").replace(/\r\n/gi," ")).replace(/  /gi,"").replace(/_newstringhere_/gi,"\r\n\r\n")),""===selection&&id>0&&BX("message_text_"+id,!0)){var message=BX("message_text_"+id,!0);"object"==typeof message&&message&&(selection=message.innerHTML)}var videoWMV=function(str,p1){var result=" ",rWmv,res=/showWMVPlayer.*?bx_wmv_player.*?file:[\s'"]*([^"']*).*?width:[\s'"]*([^"']*).*?height:[\s'"]*([^'"]*).*?/gi.exec(p1),rFlv;(res&&(result="[VIDEO WIDTH="+res[2]+" HEIGHT="+res[3]+"]"+res[1]+"[/VIDEO]")," "==result)&&((res=/bxPlayerOnload[\s\S]*?[\s'"]*file[\s'"]*:[\s'"]*([^"']*)[\s\S]*?[\s'"]*height[\s'"]*:[\s'"]*([^"']*)[\s\S]*?[\s'"]*width[\s'"]*:[\s'"]*([^"']*)/gi.exec(p1))&&(result="[VIDEO WIDTH="+res[3]+" HEIGHT="+res[2]+"]"+res[1]+"[/VIDEO]"));return result};selection=(selection=(selection=(selection=(selection=(selection=(selection=(selection=(selection=(selection=selection.replace(/[\n|\r]*<br(\s)*(\/)*>/gi,"\n")).replace(/<script[^>]*>/gi,"").replace(/<\/script[^>]*>/gi,"")).replace(/\001([^\002]*)\002/gi,videoWMV)).replace(/<noscript[^>]*>/gi,"").replace(/<\/noscript[^>]*>/gi,"")).replace(/\003([^\004]*)\004/gi," ")).replace(/<table class\=[\"]*forum-quote[\"]*>[^<]*<thead>[^<]*<tr>[^<]*<th>([^<]+)<\/th><\/tr><\/thead>[^<]*<tbody>[^<]*<tr>[^<]*<td>/gi,"")).replace(/<table class\=[\"]*forum-code[\"]*>[^<]*<thead>[^<]*<tr>[^<]*<th>([^<]+)<\/th><\/tr><\/thead>[^<]*<tbody>[^<]*<tr>[^<]*<td>/gi,"")).replace(/<table class\=[\"]*data-table[\"]*>[^<]*<tbody>/gi,"")).replace(/<\/td>[^<]*<\/tr>(<\/tbody>)*<\/table>/gi,"")).replace(/[\r|\n]{2,}([\001|\002])/gi,"\n$1");for(var ii=0;ii++<50&&(selection.search(/\002([^\002\003]*)\003/gi)>=0||selection.search(/\001([^\001\003]*)\003/gi)>=0);)selection=selection.replace(/\002([^\002\003]*)\003/gi,"[CODE]$1[/CODE]").replace(/\001([^\001\003]*)\003/gi,"[QUOTE]$1[/QUOTE]");var regexReplaceTableTag=function(s,tag,replacement){for(var re_match=new RegExp("([^]*)("+tag+")([^]*)","i"),re_replace=new RegExp("((?:)(?:[^]*))("+tag+")((?:[^]*)(?:))","i"),ij=0;ij++<300&&s.search(re_match)>=0;)s=s.replace(re_replace,"$1"+replacement+"$3");return s};for(ii=0;ii++<10&&selection.search(/\004([^\004\003]*)\003/gi)>=0;)selection=regexReplaceTableTag(selection,"<tr>","[TR]"),selection=regexReplaceTableTag(selection,"</tr>","[/TR]"),selection=regexReplaceTableTag(selection,"<td>","[TD]"),selection=(selection=regexReplaceTableTag(selection,"</td>","[/TD]")).replace(/\004([^\004\003]*)\003/gi,"[TABLE]$1[/TD][/TR][/TABLE]");selection=(selection=(selection=(selection=(selection=(selection=(selection=BX.browser.IsIE()?selection.replace(/<img(?:(?:\s+alt\s*=\s*\"?smile([^\"\s]+)\"?)|(?:\s+\w+\s*=\s*[^\s>]*))*>/gi,"$1"):selection.replace(/<img.*?alt=[\"]*smile([^\"\s]+)[\"]*[^>]*>/gi,"$1")).replace(/<a[^>]+href=[\"]([^\"]+)\"[^>]+>([^<]+)<\/a>/gi,"[URL=$1]$2[/URL]")).replace(/<a[^>]+href=[\']([^\']+)\'[^>]+>([^<]+)<\/a>/gi,"[URL=$1]$2[/URL]")).replace(/<[^>]+>/gi," ").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"')).replace(/(smile(?=[:;8]))/g,"")).replace(/\&shy;/gi,"")).replace(/\&nbsp;/gi," "),BX.onCustomEvent(this.form,"onQuote",[{author:this.mess["m"+id].author,id:id,text:selection}])}else if("reply"==act)BX.onCustomEvent(this.form,"onReply",[{author:this.mess["m"+id].author,id:id}]);else if("del"!=act||confirm(BX.message("f_cdm"))){if("moderate"==act||"del"==act){var link=BX.proxy_context,href=link.getAttribute("bx-href").replace(/.AJAX_CALL=Y/g,"").replace(/.sessid=[^&]*/g,""),tbl=BX.findParent(link,{tag:"table"}),note=BX.create("a",{attrs:{className:"reply-action-note"}}),replyActionDone=function(){BX.remove(note),BX.show(link.parentNode)};BX.hide(link.parentNode),note.innerHTML=BX.message("f_wait"),link.parentNode.parentNode.appendChild(note),BX.ajax.loadJSON(href,{AJAX_CALL:"Y",sessid:BX.bitrix_sessid()},BX.delegate((function(res){if(res.status&&tbl)if(BX.onCustomEvent(window,"onForumCommentAJAXAction",[act]),"del"==act){var curpage=window.curpage||top.window.location.href;BX.fx.hide(tbl,"scroll",{time:.15,callback_complete:BX.delegate((function(){BX.remove(tbl),replyActionDone();var reviews=BX.findChild(BX(this.form.id+"container"),{class:"reviews-post-table"},!0,!0);(!reviews||reviews.length<1)&&this.params.pageNumber>1&&BX.reload(curpage)}),this)})}else{var bHidden=BX.hasClass(tbl,"reviews-post-hidden"),label=bHidden?BX.message("f_hide"):BX.message("f_show"),tbldiv=BX.findChild(tbl,{className:"reviews-text"},!0);BX.fx.hide(tbldiv,"fade",{time:.1,callback_complete:function(){BX.toggleClass(tbl,"reviews-post-hidden"),link.innerHTML=label,href=href.replace(new RegExp("REVIEW_ACTION="+(bHidden?"SHOW":"HIDE")),"REVIEW_ACTION="+(bHidden?"HIDE":"SHOW")),link.setAttribute("bx-href",href),BX.fx.show(tbldiv,"fade",{time:.1}),replyActionDone(),BX.style(tbldiv,"background-color",bHidden?"#FFFFFF":"#E5F8E3")}})}else BX.addClass(note,"error"),note.innerHTML='<span class="errortext">'+res.message+"</span>"}),this))}}else BX.DoNothing();else BX.DoNothing();return!1}};var FTRForm=((d=function(params,editor){if(this.id="FTRForm"+params.form.id,this.form=params.form,this.editor=editor,this.windowEvents={},this.nodeInputs={},this.params={messageMax:64e3},this.onsuccess=BX.delegate(this.onsuccess,this),this.onfailure=BX.delegate(this.onfailure,this),this.submit=BX.delegate(this.submit,this),this.bindEvents=BX.delegate(this.bindEvents,this),BX.bind(this.form,"submit",this.submit),this.isAjax="Y"==params.ajaxPost,"Y"==params.captcha){var oCaptcha=new Captcha(this.form);BX.addCustomEvent(editor,"OnContentChanged",BX.proxy(oCaptcha.Show,oCaptcha)),BX.ready((function(){BX.bind(BX("forum-refresh-captcha"),"click",BX.proxy(oCaptcha.Update,oCaptcha))})),"Y"==params.bVarsFromForm&&oCaptcha.Show()}BX.addCustomEvent(this.form,"onQuote",BX.delegate((function(params){this.show(),this.quote(params)}),this)),BX.addCustomEvent(this.form,"onReply",BX.delegate((function(params){this.show(),this.paste(params)}),this)),BX.addCustomEvent(this.form,"onTransverse",BX.delegate(this.transverse,this)),this.bindEvents()}).prototype={submit:function(e){if(this.validate()){if(this.prepareForm(),this.disableButtons(!0),!this.isAjax)return!0;this.send()}return BX.PreventDefault(e)},prepareForm:function(){},disableButtons:function(state){for(var arr=this.form.getElementsByTagName("input"),i=0;i<arr.length;i++)"submit"==arr[i].getAttribute("type")&&(arr[i].disabled=!1!==state)},validate:function(){this.editor.SaveContent();let errors=0;for(let key in this.nodeInputs.requiredFields)this.validateInput(this.nodeInputs.requiredFields[key].name)||errors++;return this.form.REVIEW_TEXT&&!this.validateMessage(this.form.REVIEW_TEXT)&&errors++,!errors},busy:!1,send:function(){return!0!==this.busy&&(this.busy=!0,this.form.elements.dataType||this.form.appendChild(BX.create("input",{props:{type:"hidden",name:"dataType",value:"json"}})),BX.onCustomEvent(this.form,"onRequest",[this.form,this]),BX.ajax.submitAjax(this.form,{method:"POST",url:this.form.action,dataType:"json",onsuccess:this.onsuccess,onfailure:this.onfailure}),!0)},onsuccess:function(result){this.busy=!1,this.disableButtons(!1),BX.onCustomEvent(this.form,"onResponse",[this.form,this]),this.get(result)},onfailure:function(){BX.onCustomEvent(this.form,"onResponse",[this.form,this]),BX.reload()},get:function(result){if(window.curpage=window.curpage||top.window.location.href,BX.onCustomEvent(window,"onForumCommentAJAXPost",[result,this.form]),void 0===result||result.reload)BX.reload(window.curpage);else{if(result.status){if(result.allMessages||void 0!==result.message)BX.onCustomEvent(this.form,"onAdd",[result.messageID,result]),this.clear();else if(result.previewMessage){var previewDIV=BX.findChild(document,{className:"reviews-preview"},!0),previewParent=BX.findChild(document,{className:/reviews-reply-form|reviews-collapse/},!0).parentNode,previewNode=window.fTextToNode(result.previewMessage);window.fReplaceOrInsertNode(previewNode,previewDIV,previewParent,{className:/reviews-reply-form|reviews-collapse/}),window.PostFormAjaxStatus(""),window.fRunScripts(result.previewMessage)}const nodeMessageID=result.messageID?`message${result.messageID}`:"";nodeMessageID&&("function"==typeof scrollToBlock?scrollToBlock(`#${nodeMessageID}`):BX.scrollToNode(message));const $nodeTextBefore=document.querySelector(".text_before");$nodeTextBefore&&($nodeTextBefore.textContent="");const $jqNodeReviewReplyForm=$(".reviews-reply-form");$jqNodeReviewReplyForm.length&&$jqNodeReviewReplyForm.slideUp()}result.statusMessage&&window.PostFormAjaxStatus(result.statusMessage,!!result.status)}},clear:function(){this.editor.CheckAndReInit(""),this.editor.fAutosave&&BX.bind(this.editor.pEditorDocument,"keydown",BX.proxy(this.editor.fAutosave.Init,this.editor.fAutosave));var previewDIV=BX.findChild(document,{className:"reviews-preview"},!0);previewDIV&&BX.remove(previewDIV);for(var i=0,fileDIV,fileINPUT,fileINPUT1;(fileDIV=BX("upload_files_"+i+++"_"+this.form.index.value))&&fileDIV;)(fileINPUT=BX.findChild(fileDIV,{tagName:"input"},!0))&&BX(fileINPUT)&&((fileINPUT1=BX.clone(fileINPUT)).value="",fileINPUT.parentNode.insertBefore(fileINPUT1,fileINPUT),fileINPUT.parentNode.removeChild(fileINPUT)),BX.hide(fileDIV);var attachLink=BX.findChild(this.form,{className:"forum-upload-file-attach"},!0);attachLink&&BX.show(attachLink);var attachNote=BX.findChild(this.form,{className:"reviews-upload-info"},!0);attachNote&&BX.hide(attachNote);var captchaIMAGE=null,captchaHIDDEN=BX.findChild(this.form,{attr:{name:"captcha_code"}},!0),captchaINPUT=BX.findChild(this.form,{attr:{name:"captcha_word"}},!0),captchaDIV=BX.findChild(this.form,{className:"reviews-reply-field-captcha-image"},!0);captchaDIV&&(captchaIMAGE=BX.findChild(captchaDIV,{tag:"img"})),captchaHIDDEN&&captchaINPUT&&captchaIMAGE&&(captchaINPUT.value="",BX.ajax.getCaptcha((function(result){captchaHIDDEN.value=result.captcha_sid,captchaIMAGE.src="/bitrix/tools/captcha.php?captcha_code="+result.captcha_sid})))},show:function(){return BX.onCustomEvent(this.form,"onBeforeShow",[this]),BX.show(this.form.parentNode),BX.scrollToNode(BX.findChild(this.form,{attribute:{name:"send_button"}},!0)),setTimeout(BX.delegate((function(){this.editor.Focus(),BX.defer(this.editor.Focus,this.editor)()}),this),100),BX.onCustomEvent(this.form,"onAfterShow",[this]),!1},hide:function(){return BX.onCustomEvent(this.form,"onBeforeHide",[this]),BX.hide(this.form.parentNode),BX.onCustomEvent(this.form,"onAfterHide",[this]),!1},transverse:function(){return"none"==this.form.parentNode.style.display?this.show():this.hide(),!1},quote:function(params){BX.onCustomEvent(this.form,"onPaste",[params,"QUOTE",this]);var author=params.author||null,text,res=params.text||"";"wysiwyg"==this.editor.GetViewMode()?(res=res.replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/\n/g,"<br/>"),author&&(res=(author=""!=(author=author.id>0?'<span id="'+this.editor.SetBxTag(!1,{tag:"postuser",params:{value:author.id}})+'" class="bxhtmled-metion">'+author.name.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")+"</span>":"<span>"+author.name.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")+"</span>")?author+BX.message("f_author")+"<br/>":"")+res)):this.editor.bbCode&&author&&(res=(author=""!==(author=author.id>0?"[USER="+author.id+"]"+author.name+"[/USER]":author.name)?author+BX.message("f_author")+"\n":"")+res),this.editor.action.actions.quote.setExternalSelection(res),this.editor.action.Exec("quote")},paste:function(params){BX.onCustomEvent(this.form,"onPaste",[params,"REPLY",this]);var author=params.author||null;if(author)if("wysiwyg"==this.editor.GetViewMode()){var doc=this.editor.GetIframeDoc(),range=this.editor.selection.GetRange(),mention=BX.create("SPAN",{props:{className:"bxhtmled-metion"},text:BX.util.htmlspecialcharsback(author.name)},doc),spaceNode=BX.create("SPAN",{html:",&nbsp;"},doc);if(this.editor.SetBxTag(mention,{tag:"postuser",params:{value:author.id}}),this.editor.selection.InsertNode(mention,range),mention&&mention.parentNode){var parentMention=BX.findParent(mention,{className:"bxhtmled-metion"},doc.body);parentMention&&this.editor.util.InsertAfter(mention,parentMention)}mention&&mention.parentNode&&(this.editor.util.InsertAfter(spaceNode,mention),this.editor.selection.SetAfter(spaceNode))}else"code"==this.editor.GetViewMode()&&this.editor.bbCode&&(this.editor.textareaView.Focus(),this.editor.textareaView.WrapWith(!1,!1,"[USER="+author.id+"]"+author.name+"[/USER],"))},validateMessage:function(){const message=this.editor.GetContent(),MESSAGE_LENGTH=message.length,MESSAGE_MAX=64e3;return MESSAGE_LENGTH?MESSAGE_LENGTH>64e3?(this.nodeInputs.text.wrapper.dataset.error=BX.message("max_len").replace(/#MAX_LENGTH#/gi,messageMax).replace(/#LENGTH#/gi,MESSAGE_LENGTH),!1):(this.nodeInputs.text.wrapper.dataset.error="",!0):(this.nodeInputs.text.wrapper.dataset.error=BX.message("required_field"),!1)},validateInput:function(input){if(this.nodeInputs.requiredFields[input].wrapper){if(!this.nodeInputs.requiredFields[input].input.value.length)return this.nodeInputs.requiredFields[input].wrapper.dataset.error=BX.message("required_field"),!1;this.nodeInputs.requiredFields[input].wrapper.dataset.error=""}return!0},bindEvents:function(){this.nodeInputs.requiredFields={},this.form.setAttribute("novalidate",!0),this.form.querySelectorAll("[required]").forEach(node=>{this.nodeInputs.requiredFields[node.name]={input:node,name:node.name,wrapper:node.closest(".reviews-reply-field")},node.addEventListener("input",()=>{this.validateInput(node.name)})}),this.form.REVIEW_TEXT&&(this.nodeInputs.text={input:this.form.REVIEW_TEXT,wrapper:this.form.REVIEW_TEXT.closest(".reviews-reply-field")},BX.addCustomEvent(this.editor,"OnContentChanged",text=>{this.nodeInputs.text.wrapper.dataset.error=text.length?"":BX.message("required_field")}))}},d),OnEditorInitedAfterEvents=[],d;BX.Forum.Init=function(params){if(params&&"object"==typeof params){var event1,event;for(new FTRList(params);(event1=OnEditorInitedAfterEvents.pop())&&event1;)BX.removeCustomEvent(window,"OnEditorInitedAfter",event1);event=function(editor){OnEditorInitedAfter(editor,params),BX.removeCustomEvent(window,"OnEditorInitedAfter",event)},OnEditorInitedAfterEvents.push(event),BX.addCustomEvent(window,"OnEditorInitedAfter",event)}};var OnEditorInitedAfter=function(editor,params){editor.id==params.lheId&&(editor.insertImageAfterUpload=!0,BX.bind(BX("post_message_hidden"),"focus",(function(){editor.Focus()})),new FTRForm(params,editor))};BX.ready((function(){if(BX.browser.IsIE()){var posts=BX.findChildren(document,{className:"reviews-post-table"},!0),ii,all,i;if(!posts)return;for(ii=0;ii<posts.length;ii++)for(i=(all=posts[ii].getElementsByTagName("*")).length;i--;)all[i].scrollWidth>all[i].offsetWidth&&(all[i].style.paddingBottom="20px",all[i].style.overflowY="hidden")}})),window.fTextToNode=function(text){var tmpdiv=BX.create("div");return tmpdiv.innerHTML=text,tmpdiv.childNodes.length>0?tmpdiv:null},window.PostFormAjaxStatus=function(status,bScrollToBlock=!1){var arNote=BX.findChild(document,{className:"reviews-note-box"},!0,!0),i;if(arNote)for(i=0;i<=arNote.length;i++)BX.remove(arNote[i]);let msgBox=BX.findChild(document,{className:"reviews-block-container"},!0);if(msgBox||(msgBox=document.querySelector('[data-name="review_anchor"]')),!(status.length<1)){var statusDIV=window.fTextToNode(status);if(statusDIV)for(var beforeDivs=["reviews-reply-form","reviews-collapse"],tmp=msgBox;(tmp=tmp.nextSibling)&&tmp;)if(1==tmp.nodeType){var insert=!1;for(i=0;i<beforeDivs.length;i++)if(BX.hasClass(tmp,beforeDivs[i])){insert=!0;break}if(insert){tmp.parentNode.insertBefore(statusDIV,tmp),bScrollToBlock&&"function"==typeof scrollToBlock&&scrollToBlock(".reviews-note-box");break}}}},window.SetReviewsAjaxPostTmp=function(text){window.forumAjaxPostTmp=text},window.fReplaceOrInsertNode=function(sourceNode,targetNode,parentTargetNode,beforeTargetNode){var nextNode=null;return!!BX.type.isDomNode(parentTargetNode)&&(!(!BX.type.isDomNode(sourceNode)&&!BX.type.isArray(sourceNode)&&sourceNode.length>0&&!(sourceNode=window.fTextToNode(sourceNode)))&&(BX.type.isDomNode(targetNode)&&(parentTargetNode=targetNode.parentNode,nextNode=targetNode.nextSibling,parentTargetNode.removeChild(targetNode)),nextNode||(nextNode=BX.findChild(parentTargetNode,beforeTargetNode,!0)),nextNode?nextNode.parentNode.insertBefore(sourceNode,nextNode):parentTargetNode.appendChild(sourceNode),!0))},window.fRunScripts=function(msg){var ob=BX.processHTML(msg,!0);BX.ajax.processScripts(ob.SCRIPT,!0)},window.ShowLastEditReason=function(checked,div){div&&(div.style.display=checked?"block":"none")},window.AttachFile=function(iNumber,iCount,sIndex,oObj){var element=null,bFined=!1,bHide;iNumber=parseInt(iNumber),iCount=parseInt(iCount),document.getElementById("upload_files_info_"+sIndex).style.display="block";for(var ii=iNumber;ii<iNumber+iCount&&((element=document.getElementById("upload_files_"+ii+"_"+sIndex))&&null!==typeof element);ii++)if("none"==element.style.display){bFined=!0,element.style.display="block";break}!0===(!bFined||ii>=iNumber+iCount-1)&&(oObj.style.display="none")},window.GetSelection=function(){var range,text="";return window.getSelection?text=(range=window.getSelection()).toString():document.selection&&(text=(range=document.selection).createRange().text),text}}(window);