function asproFilterHelper(e,t){if(this.resultDiv=$("#filter-helper"),this.smart=e,this.noAjax=t,this.resultDiv.length){this.resultDiv.empty(),this.smartFilter=$(".bx_filter.bx_filter_vertical"),this.filterHelper=[],this.getInputsInfo(this.smartFilter);var i=this;$(document).on("click","#filter-helper .filterHelperItem .delete_filter, #filter-helper .filterHelperItem:not(.multiple) .title-wrapper",(function(e){var t=$(e.target),r=t.closest(".filterHelperItem").data("id"),l={};l.ID=r,t.closest(".filterHelperItem").hasClass("multiple")&&(l.MULTIPLE=!0),t.closest(".filterHelperItem").hasClass("price")&&(l.PRICE=!0),i.clearValue(l),this.closest(".filterHelperItem").remove(),i.resultDiv.find(".filterHelperItem").length||i.resultDiv.remove()})),$(document).on("click","#filter-helper .filterHelperItem .select-wrapper .select-value",(function(e){var t=$(e.target).closest(".select-value").data("id");i.clearValue({ID:t});let r=$(this).closest(".filterHelperItem");this.remove(),r.find(".select-value").length||(r.remove(),i.resultDiv.find(".filterHelperItem").length||i.resultDiv.remove())}))}}asproFilterHelper.prototype.check=function(){return this.resultDiv.length&&this.smartFilter.length},asproFilterHelper.prototype.getInputsInfo=function(e){if(e.length&&this.check()){var t=this;this.filterHelper=[],this.inputs=e.find("input"),this.inputs.length&&this.inputs.each((function(i,r){var l=$(r),s=l.hasClass("min-price")||l.hasClass("max-price"),a=l.prop("checked")&&!l.prop("disabled"),p=l[0].id.indexOf("all");if(a&&0!==p||s&&l.val()){var n="",o="",c=l.closest(".bx_filter_parameters_box");if(c.length){o=c.data("prop_code")?c.data("prop_code"):"";var h=c.data("property_name");void 0!==h&&(n=h)}var d=void 0===l.data("title")?"":l.data("title");if(!d){var f=e.find("label[for="+l.attr("name")+"]"),v=e.find("label[for="+l.attr("id")+"]");f.length?d=(d=f.find("[title]")).length?d.attr("title"):"":v.length&&(d=v.find("[title]"),d=v.length?d.attr("title"):"")}s&&(l.hasClass("min-price")?d=BX.message("FROM"):l.hasClass("max-price")&&(d=BX.message("BEFORE")),d+=" "+l.val(),o=l.attr("name").replace(/_MIN|_MAX/,""));var g={NAME:l.attr("id"),VALUE:d,INPUT:l,TITLE:n.trim(),CODE:o,TYPE:s?"price":l.attr("type")};t.add(g)}}))}},asproFilterHelper.prototype.reload=function(){if(!this.check())return!1;this.filterHelper=[],this.resultDiv.length&&(this.resultDiv.empty(),this.resultDiv.hide())},asproFilterHelper.prototype.add=function(e){if(!this.check())return!1;void 0===this.filterHelper&&this.reload(),void 0===this.filterHelper[e.CODE]&&(this.filterHelper[e.CODE]=[]),this.filterHelper[e.CODE].push(e)},asproFilterHelper.prototype.show=function(){if(!this.check())return!1;if(this.resultDiv=$("#filter-helper"),this.resultDiv.length&&this.filterHelper&&Object.keys(this.filterHelper).length){this.resultDiv.empty();var e="";e+='<div class="filter_title">',e+="<span>"+BX.message("FILTER_HELPER_TITLE")+"</span>",e+="</div>",this.resultDiv.append(e);var t=$('<div class="filterHelperItemsWrapper"></div>');this.resultDiv.append(t),this.resultDiv.append(t);var i=this;for(var r in i.filterHelper){var l=i.getResultHTML(i.filterHelper[r]);l&&t.append(l)}this.resultDiv.css("display","flex")}},asproFilterHelper.prototype.clearValue=function(e){if(!this.check())return!1;if(void 0!==e.MULTIPLE&&e.MULTIPLE||void 0!==e.PRICE&&e.PRICE)if(void 0!==e.PRICE&&e.PRICE){var t=this.smartFilter.find("input.min-price#"+e.ID+"_MIN"),i=this.smartFilter.find("input.max-price#"+e.ID+"_MAX"),r=t.closest(".bx_filter_parameters_box_container");if(r.length){var l=r.find("[id^=colorUnavailableActive_]").attr("id").replace("colorUnavailableActive_",""),s=window["trackBar"+l];s.leftPercent=s.rightPercent=0,r.find("[id^=left_slider_]").css({left:"0%"}),r.find("[id^=colorUnavailableActive_]").css({left:"0%",right:"0%"}),r.find("[id^=colorAvailableInactive_]").css({left:"0%",right:"0%"}),r.find("[id^=colorAvailableActive_]").css({left:"0%",right:"0%"}),r.find("[id^=right_slider_]").css({right:"0%"})}if(t.length&&(t.val(""),smartFilter.keyup(t[0]),$("#"+e.ID+"_MIN").val("")),i.length){i.attr("placeholder");i.val(""),smartFilter.keyup(i[0]),$("#"+e.ID+"_MAX").val("")}}else{var a=this.smartFilter.find("[data-prop_code="+e.ID+"]");if(a.length){var p=a.find("input");p.length&&p.each((function(e,t){var i=$(t),r=i.siblings("label[for="+i.attr("id")+"]");r.length&&r.hasClass("active")?r.trigger("click"):t.checked&&i.trigger("click")}))}}else{var n=$("#"+e.ID);if(n.length){var o=n.attr("type");if("checkbox"==o){var c=$("label[for="+e.ID+"]");c.length&&c.hasClass("active")?c.trigger("click"):n[0].checked&&n.trigger("click")}else if("radio"==o){var h=n.closest(".bx_filter_parameters_box_container");if(h.length){var d=h.siblings(".popup-window").length?h.siblings(".popup-window"):!!h.find(".bx_filter_select_popup").length&&h.find(".bx_filter_select_popup"),f=!!d,v=h.find("[id^=all_]");if(v.length){var g=v.attr("id");if(f){var u=d.find("label[for="+g+"]");if(u.length){u.trigger("click"),d.closest(".popup-window").length&&d.closest(".popup-window").hide();var _=d.find(".bx_filter_select_popup");_.length&&_.show()}}else v.trigger("click")}}}}}this.noAjax&&(this.reloadPage=!0)},asproFilterHelper.prototype.apply=function(){if(!this.check())return!1;if(this.noAjax&&this.reloadPage){var e=this.smartFilter.find("#set_filter");e.length&&e.trigger("click")}},asproFilterHelper.prototype.getResultHTML=function(e){if(!this.check())return!1;if(1==e.length){(t=e[0]).ITEM_CLASS=" colored_theme_bg_hovered_hover ","price"==e[0].TYPE&&(t.ITEM_CLASS+=" price",t.NAME=t.NAME.replace(/_MIN|_MAX/,""))}else{if(!(e.length>1))return!1;var t={NAME:e[0].CODE,TITLE:e[0].TITLE,VALUE:e.length+BX.message("FILTER_HELPER_VALUES"),ITEM_CLASS:"price"==e[0].TYPE?"price colored_theme_bg_hovered_hover":"multiple",TYPE:e[0].TYPE,VALUES:e}}"in_stock"==t.CODE&&(t.TITLE="");var i="";i+='<svg xmlns="http://www.w3.org/2000/svg" width="8.031" height="8" viewBox="0 0 8.031 8">',i+='<path class="cls-1" d="M756.41,668.967l2.313,2.315a1,1,0,0,1-1.415,1.409L755,670.379l-2.309,2.312a1,1,0,0,1-1.414-1.409l2.312-2.315-2.281-2.284a1,1,0,1,1,1.414-1.409L755,667.555l2.277-2.281a1,1,0,1,1,1.414,1.409Z" transform="translate(-751 -665)"></path>',i+="</svg>";var r="";return r+='<div class="filterHelperItem colored_theme_bg rounded3'+(void 0===t.ITEM_CLASS?"":" "+t.ITEM_CLASS)+'" data-id="'+t.NAME+'">',r+='<div class="title-wrapper colored_theme_bg_hovered_hover">',t.TITLE&&(r+='<span class="title">',r+=t.TITLE+": ",r+="</span>"),r+='<span class="value">',"price"==t.TYPE&&void 0!==t.VALUES?t.VALUES.forEach((function(e,t){r+=e.VALUE+" "})):r+=t.VALUE,r+="</span>",r+="</div>",r+='<span class="delete_filter colored_theme_bg_hovered_hover">',r+=i,r+="</span>",void 0!==t.VALUES&&"price"!=t.TYPE&&(r+='<div class="select-wrapper">',r+='<div class="select-inner rounded3">',t.VALUES.forEach((function(e,t){r+='<div class="select-value" data-id="'+e.NAME+'">',r+=e.VALUE,r+=i,r+="</div>"})),r+="</div>",r+="</div>"),r+="</div>"};